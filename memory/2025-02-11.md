# 2025-02-11

## Data fetch: 100k volume + frequent flush

- **Volume filter**: Both Kalshi and Polymarket now default to 100k (`--kalshi-min-volume 100000`, `--clob-min-volume 100000`)
- **Memory**: Flush more frequently to avoid OOM:
  - Kalshi: flush every 10 markets (was 50), or when rows > 100k (was 500k)
  - Polymarket CLOB: flush every 10 markets (was 50), max_memory_rows 100k (was 1M)
- **New args**: `--kalshi-flush-interval`, `--clob-flush-interval`, `--clob-max-memory-rows` for tuning

## Migration: data/parquet â†’ data/polymarket

- All scripts now default to `data/polymarket` for Polymarket data
- **Markets**: `data/polymarket/markets.parquet` (single file) supported; fallback to `data/parquet/markets/` sharded format
- **Prices**: `data/polymarket/prices/` (primary); fallback to `data/parquet/prices` if empty
- **Trades**: `data/polymarket/trades/` (primary); fallback to `data/parquet/trades` if empty
- Config, parquet_store, fetcher, collection, whale_strategy, and ~15 scripts updated
- **Safe to delete** `data/parquet/` once you confirm scripts work (or copy trades to polymarket/trades first)
